<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Generative Abstraction</title>
	<link rel="stylesheet" href="../css/style2.css">
	<script type="text/javascript" src="../../lib/paper.js"></script>
	<script type="text/paperscript" canvas="canvas_gen">
			
	/*
	regen of triangles.
	this one is for you.
	written by Dealga McArdle 2011, November.
	MIT license
	
	12 Nov, exploration of paper.js
	13 Nov, bug tracking. (rasterize didn't like negative coordinates)
	
	Milestsones.
	[x] place n triangles within a circular boundary.
	[x] random size 
	[x] random gradient 
	[x] random rotation
	[x] include refresh button
	[ ] include add more
	[ ] include reverse content
	[ ] add ability to save hires image.
	
	*/
	
	// Layer inits
	var layerMain = new Layer();
	var layerTop = new Layer();
	
	var pathRefreshButton = new Path();
	var pathReverseButton = new Path();
	var pathAddButton = new Path();
	
	// stackoverflow.com/questions/4959975/random-between-two-numbers-in-javascript
	function random_between(lowValue, highValue){
       return (Math.random() * highValue | lowValue) + 1;
	 }
	
		
	function get_random_gradient(){
		
		/*
		// this is the weakest function, it should include bitshifting and maybe hue as colour.
		[TODO] add more control and randomness.
		*/
		var reds = ['FA', 'FB', 'FC', 'FD', 'FE', 'FF'];
		var greens = ['00', '10', '34', '2A', 'A0', 'a0'];
		var blues = ['00', '10', '04', '2A', '40','6a'];
		var r1 = reds[random_between(0, reds.length)];
		var g1 = '00';
		var b1 = '00';
		var r2 = reds[random_between(0, reds.length)];
		var g2 = greens[random_between(0, greens.length)];
		var b2 = blues[random_between(0, blues.length)];
		var rgb1 = '#' + r1 + g1 + b1;
		var rgb2 = '#' + r2 + g2 + b2;
		
		return [rgb1, rgb2];
	}
	
	
	function get16ths(){
		// this function returns an array with an iteration of 22.5 from 0 to 360
		var myArray = new Array();
		var degrees = 0;
		while (degrees < 360){
			myArray.push(degrees);
			degrees += 45/2;
				
		}
		return myArray;
	}
	
	
	
	
	function draw_triangle(point){
		/*
		point [is center]. let's build a triangle around it.
		*/
	
	
		var segments = [new Point(50, 75), new Point(100, 25),new Point(150, 75)]; 
		var myPath = new Path(segments);
		myPath.strokeColor = 'black';
		myPath.strokeColor.alpha = 0;
		myPath.closed = true;
		
		var topLeft = new Point(50, 25);
		var bottomLeft = new Point(50, 75);
				
		var myGradient = new Gradient(get_random_gradient());
		myPath.fillColor = new GradientColor(myGradient, topLeft, bottomLeft);
		
		var rotateDegrees = get16ths();
		var rotationalAmount = rotateDegrees[random_between(0, rotateDegrees.length)];
		myPath.rotate(rotationalAmount);
				
		myPath.position = point;
		myPath.scale(Math.random()*Math.random()*5);
		myPath.opacity = Math.random();
		
	}

	
	function draw_buttons(){
	
		// this would be prettier if PointText included a method to determine px width of content
		// but i should refactor this function, it's a disgrace.
		layerTop.activate();
	
		var point = new Point(300, 670);
		var cornerSize = new Size(3,3);
				
		// refreshButton
		var buttonRefreshText = "hit refresh";
		var rectangleDimensions = new Size(76, 14);
		var rectangle = new Rectangle(point-[11,11], rectangleDimensions);
		pathRefreshButton = new Path.RoundRectangle(rectangle, cornerSize);
		pathRefreshButton.fillColor = '777777';
		pathRefreshButton.strokeColor = '#DDDDDD';
		pathRefreshButton.strokeWidth = 0.76;
		
		var text = new PointText(point);
		text.content = buttonRefreshText;
		text.characterStyle = {
			fillColor:'#EEEEEE',
			fontSize: 9
		};
		
		// pathReverseButton = new Path();
		var buttonReverseText = "reverse items";
		point += [80, 0];
		var rectangle2Dimensions = new Size(88, 14);
		var rectangle2 = new Rectangle(point-[7,11], rectangle2Dimensions);
		pathReverseButton = new Path.RoundRectangle(rectangle2, cornerSize);
		pathReverseButton.fillColor = '777777';
		pathReverseButton.strokeColor = '#DDDDDD';
		pathReverseButton.strokeWidth = 0.76;
		
		var text = new PointText(point);
		text.content = buttonReverseText;
		text.characterStyle = {
			fillColor:'#EEEEEE',
			fontSize: 9
		};
		
		
		var buttonAddText = "add items";
		point -= [162, 0];
		var rectangle3Dimensions = new Size(69, 14);
		var rectangle3 = new Rectangle(point-[7,11], rectangle3Dimensions);
		pathAddButton = new Path.RoundRectangle(rectangle3, cornerSize);
		pathAddButton.fillColor = '777777';
		pathAddButton.strokeColor = '#DDDDDD';
		pathAddButton.strokeWidth = 0.76;
		
		var text = new PointText(point);
		text.content = buttonAddText;
		text.characterStyle = {
			fillColor:'#EEEEEE',
			fontSize: 9
		};
			
		
		layerMain.activate();
		
			
		
	}
	
	
	// mouse interaction:
	
	function onMouseDown(event) {
	
		if (pathRefreshButton.hitTest(event.point) != null){
			// console.log("yes");
			layerMain.removeChildren();
			main();
		}
		
		if (pathReverseButton.hitTest(event.point) != null){
			// console.log("yes");
			layerMain.reverseChildren();
			// main();
		}
		
		if (pathAddButton.hitTest(event.point) != null){
			// console.log("yes");
			// layerMain.reverseChildren();
			main();
		}
		
		
	}
	
	
	
	function main(){
		layerMain.activate();
		var numTris = 20; 
		for (i=0; i < numTris; i++){
			var pointOnCircle = 2.0 * 3.141592 * Math.random();
			var tRadius = random_between(0,200);
			var posX = Math.sin(pointOnCircle) * tRadius;
			var posY = Math.cos(pointOnCircle) * tRadius;
			posX += 300;
			posY += 300;
			
			var point = new Point(posX, posY);
			draw_triangle(point);
		
		}
		draw_buttons();
		
	}
	
	
	
	
	
	
	
	
	
	main();
		
	</script>
</head>
<body>
	<canvas id="canvas_gen" width="700" height="700"></canvas>

</body>
</html>




